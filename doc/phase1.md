# 迭代1

## 迭代0

迭代0主要是对项目的开发进行各种前期准备，针对项目规模和复杂性的不同，准备的项也不同。复杂项目要准备的内容会稍微多一些。下面列出了一些迭代0阶段需要完成的任务清单（摘自郑晔老师《10x 程序员工作法》之“迭代0: 启动开发之前，你应该准备什么？”）：

* 需求
  * 功能：细化过的迭代1需求
  * 交互：用户界面，用户交互
* 技术
  * 基础：技术选型，技术架构
  * 数据库：数据库表结构，数据库迁移
  * 持续集成：持续集成服务器，持续集成监视器，构建脚本
  * 测试：单元测试和集成测试，端到端测试
  * 发布：发布脚本

针对这个项目而言，因为是命令行应用，所以用户界面和用户交互不需要太多考虑，直接按照需求描述的内容进行设计即可。针对第一阶段的需求，技术选型上采用Java即可，暂时不需要对数据库进行设计，存储采用本地文件（JSON）。需要基于gradle编写构建脚本，设置测试覆盖率，暂不搭建持续集成服务和监控。

测试方面，采用测试驱动开发的方法，构建测试金字塔：大量的单元测试为基础，辅以少量的继承测试和端到端测试。发布脚本gradle已提供，暂不需要自己编写了，只是要写清楚操作步骤。

## 第一阶段功能的设计

从需求描述中可以知道如下业务信息：

1. 存在一个Todo项，它表示一个待办事项，所以肯定有内容和索引，它还可以被完成
2. 可以添加Todo项，可以查看Todo项列表，默认查看未完成的Todo项，除非使用--all参数
3. Todo项存储在本地文件中，索引逐一递增

设计TodoItem表示Todo项，设计TodoItemService来实现添加和查看功能。根据依赖倒置原则（DIP），使用TodoItemRepository抽象类负责Todo项的持久化存储，TodoItemJsonRepository实现该抽象类并将Todo项持久化到JSON格式文件中。

![](/Users/likejun/todo/doc/phase1.png)